---
- name: Get Device Facts
  hosts : vMX
  connection: local
  gather_facts: no
  roles:
  - Juniper.junos

  vars_prompt:
  - name: USERNAME
    prompt: User name
    private: no
  - name: DEVICE_PASSWORD
    prompt: Device password
    private: yes

  tasks:
   - name: Checking NETCONF connectivity
     wait_for:
       host: "{{ inventory_hostname }}"
       port: 830
       timeout: 5

   - name: Retrieving information from devices
     junos_get_facts:
       host: "{{ inventory_hostname }}"
       user: "{{ USERNAME }}"
       passwd: "{{ DEVICE_PASSWORD }}"
       logfile: version.log
     register: junos

   - name : Print version
     debug: msg="{{ junos.facts.version }}"
#     debug:
#       var: junos
